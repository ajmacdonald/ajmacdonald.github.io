(this.webpackJsonpspotifytagger=this.webpackJsonpspotifytagger||[]).push([[0],{246:function(e,t){},266:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(27),r=a.n(i),c=a(383),o=a(382),l=a(95),d=a(384),h=a(390),b=a(378),u=a(374),g=a(379),j=a(381),m=a(189),p=a(1);var L=({tagColor:e="#1de9b6",barColor:t="#303030",...a})=>Object(p.jsxs)(m.a,{...a,viewBox:"0 0 400 400",children:[Object(p.jsx)("path",{stroke:"null",fill:e,d:"m310.75011,69.83626c-7.60697,-10.77654 -20.28526,-17.7496 -34.44268,-17.7496l-232.43525,0.21131c-23.24352,0 -42.26096,18.80613 -42.26096,42.04965l0,211.30478c0,23.24352 19.01743,42.04965 42.26096,42.04965l232.43525,0.21131c14.15742,0 26.83571,-6.97306 34.44268,-17.7496l83.67669,-117.90806c5.28262,-7.39567 5.28262,-17.11569 0,-24.51136l-83.67669,-117.90806l0,-0.00001z"}),Object(p.jsx)("path",{stroke:"null",fill:t,d:"M266.54 244.56L267.29 244.64L268.04 244.75L268.78 244.88L269.51 245.04L270.22 245.24L270.93 245.46L271.62 245.7L272.3 245.97L272.96 246.27L273.62 246.59L274.25 246.94L274.88 247.31L275.48 247.7L276.07 248.12L276.65 248.55L277.2 249.01L277.74 249.49L278.26 249.99L278.76 250.51L279.24 251.05L279.7 251.6L280.13 252.18L280.55 252.77L280.94 253.37L281.31 254L281.66 254.63L281.98 255.29L282.28 255.95L282.55 256.63L282.79 257.32L283.01 258.03L283.21 258.74L283.37 259.47L283.5 260.21L283.61 260.96L283.69 261.71L283.73 262.48L283.75 263.25L283.73 264.02L283.69 264.79L283.61 265.54L283.5 266.29L283.37 267.03L283.21 267.76L283.01 268.47L282.79 269.18L282.55 269.87L282.28 270.55L281.98 271.21L281.66 271.87L281.31 272.5L280.94 273.13L280.55 273.73L280.13 274.32L279.7 274.9L279.24 275.45L278.76 275.99L278.26 276.51L277.74 277.01L277.2 277.49L276.65 277.95L276.07 278.38L275.48 278.8L274.88 279.19L274.25 279.56L273.62 279.91L272.96 280.23L272.3 280.53L271.62 280.8L270.93 281.04L270.22 281.26L269.51 281.46L268.78 281.62L268.04 281.75L267.29 281.86L266.54 281.94L265.77 281.98L265 282L77.5 282L76.73 281.98L75.96 281.94L75.21 281.86L74.46 281.75L73.72 281.62L72.99 281.46L72.28 281.26L71.57 281.04L70.88 280.8L70.2 280.53L69.54 280.23L68.88 279.91L68.25 279.56L67.62 279.19L67.02 278.8L66.43 278.38L65.85 277.95L65.3 277.49L64.76 277.01L64.24 276.51L63.74 275.99L63.26 275.45L62.8 274.9L62.37 274.32L61.95 273.73L61.56 273.13L61.19 272.5L60.84 271.87L60.52 271.21L60.22 270.55L59.95 269.87L59.71 269.18L59.49 268.47L59.29 267.76L59.13 267.03L59 266.29L58.89 265.54L58.81 264.79L58.77 264.02L58.75 263.25L58.77 262.48L58.81 261.71L58.89 260.96L59 260.21L59.13 259.47L59.29 258.74L59.49 258.03L59.71 257.32L59.95 256.63L60.22 255.95L60.52 255.29L60.84 254.63L61.19 254L61.56 253.37L61.95 252.77L62.37 252.18L62.8 251.6L63.26 251.05L63.74 250.51L64.24 249.99L64.76 249.49L65.3 249.01L65.85 248.55L66.43 248.12L67.02 247.7L67.62 247.31L68.25 246.94L68.88 246.59L69.54 246.27L70.2 245.97L70.88 245.7L71.57 245.46L72.28 245.24L72.99 245.04L73.72 244.88L74.46 244.75L75.21 244.64L75.96 244.56L76.73 244.52L77.5 244.5L265 244.5L265.77 244.52L266.54 244.56ZM304.04 182.31L304.79 182.39L305.54 182.5L306.28 182.63L307.01 182.79L307.72 182.99L308.43 183.21L309.12 183.45L309.8 183.72L310.46 184.02L311.12 184.34L311.75 184.69L312.38 185.06L312.98 185.45L313.57 185.87L314.15 186.3L314.7 186.76L315.24 187.24L315.76 187.74L316.26 188.26L316.74 188.8L317.2 189.35L317.63 189.93L318.05 190.52L318.44 191.12L318.81 191.75L319.16 192.38L319.48 193.04L319.78 193.7L320.05 194.38L320.29 195.07L320.51 195.78L320.71 196.49L320.87 197.22L321 197.96L321.11 198.71L321.19 199.46L321.23 200.23L321.25 201L321.23 201.77L321.19 202.54L321.11 203.29L321 204.04L320.87 204.78L320.71 205.51L320.51 206.22L320.29 206.93L320.05 207.62L319.78 208.3L319.48 208.96L319.16 209.62L318.81 210.25L318.44 210.88L318.05 211.48L317.63 212.07L317.2 212.65L316.74 213.2L316.26 213.74L315.76 214.26L315.24 214.76L314.7 215.24L314.15 215.7L313.57 216.13L312.98 216.55L312.38 216.94L311.75 217.31L311.12 217.66L310.46 217.98L309.8 218.28L309.12 218.55L308.43 218.79L307.72 219.01L307.01 219.21L306.28 219.37L305.54 219.5L304.79 219.61L304.04 219.69L303.27 219.73L302.5 219.75L77.5 219.75L76.73 219.73L75.96 219.69L75.21 219.61L74.46 219.5L73.72 219.37L72.99 219.21L72.28 219.01L71.57 218.79L70.88 218.55L70.2 218.28L69.54 217.98L68.88 217.66L68.25 217.31L67.62 216.94L67.02 216.55L66.43 216.13L65.85 215.7L65.3 215.24L64.76 214.76L64.24 214.26L63.74 213.74L63.26 213.2L62.8 212.65L62.37 212.07L61.95 211.48L61.56 210.88L61.19 210.25L60.84 209.62L60.52 208.96L60.22 208.3L59.95 207.62L59.71 206.93L59.49 206.22L59.29 205.51L59.13 204.78L59 204.04L58.89 203.29L58.81 202.54L58.77 201.77L58.75 201L58.77 200.23L58.81 199.46L58.89 198.71L59 197.96L59.13 197.22L59.29 196.49L59.49 195.78L59.71 195.07L59.95 194.38L60.22 193.7L60.52 193.04L60.84 192.38L61.19 191.75L61.56 191.12L61.95 190.52L62.37 189.93L62.8 189.35L63.26 188.8L63.74 188.26L64.24 187.74L64.76 187.24L65.3 186.76L65.85 186.3L66.43 185.87L67.02 185.45L67.62 185.06L68.25 184.69L68.88 184.34L69.54 184.02L70.2 183.72L70.88 183.45L71.57 183.21L72.28 182.99L72.99 182.79L73.72 182.63L74.46 182.5L75.21 182.39L75.96 182.31L76.73 182.27L77.5 182.25L302.5 182.25L303.27 182.27L304.04 182.31ZM266.54 119.06L267.29 119.14L268.04 119.25L268.78 119.38L269.51 119.54L270.22 119.74L270.93 119.96L271.62 120.2L272.3 120.47L272.96 120.77L273.62 121.09L274.25 121.44L274.88 121.81L275.48 122.2L276.07 122.62L276.65 123.05L277.2 123.51L277.74 123.99L278.26 124.49L278.76 125.01L279.24 125.55L279.7 126.1L280.13 126.68L280.55 127.27L280.94 127.87L281.31 128.5L281.66 129.13L281.98 129.79L282.28 130.45L282.55 131.13L282.79 131.82L283.01 132.53L283.21 133.24L283.37 133.97L283.5 134.71L283.61 135.46L283.69 136.21L283.73 136.98L283.75 137.75L283.73 138.52L283.69 139.29L283.61 140.04L283.5 140.79L283.37 141.53L283.21 142.26L283.01 142.97L282.79 143.68L282.55 144.37L282.28 145.05L281.98 145.71L281.66 146.37L281.31 147L280.94 147.63L280.55 148.23L280.13 148.82L279.7 149.4L279.24 149.95L278.76 150.49L278.26 151.01L277.74 151.51L277.2 151.99L276.65 152.45L276.07 152.88L275.48 153.3L274.88 153.69L274.25 154.06L273.62 154.41L272.96 154.73L272.3 155.03L271.62 155.3L270.93 155.54L270.22 155.76L269.51 155.96L268.78 156.12L268.04 156.25L267.29 156.36L266.54 156.44L265.77 156.48L265 156.5L77.5 156.5L76.73 156.48L75.96 156.44L75.21 156.36L74.46 156.25L73.72 156.12L72.99 155.96L72.28 155.76L71.57 155.54L70.88 155.3L70.2 155.03L69.54 154.73L68.88 154.41L68.25 154.06L67.62 153.69L67.02 153.3L66.43 152.88L65.85 152.45L65.3 151.99L64.76 151.51L64.24 151.01L63.74 150.49L63.26 149.95L62.8 149.4L62.37 148.82L61.95 148.23L61.56 147.63L61.19 147L60.84 146.37L60.52 145.71L60.22 145.05L59.95 144.37L59.71 143.68L59.49 142.97L59.29 142.26L59.13 141.53L59 140.79L58.89 140.04L58.81 139.29L58.77 138.52L58.75 137.75L58.77 136.98L58.81 136.21L58.89 135.46L59 134.71L59.13 133.97L59.29 133.24L59.49 132.53L59.71 131.82L59.95 131.13L60.22 130.45L60.52 129.79L60.84 129.13L61.19 128.5L61.56 127.87L61.95 127.27L62.37 126.68L62.8 126.1L63.26 125.55L63.74 125.01L64.24 124.49L64.76 123.99L65.3 123.51L65.85 123.05L66.43 122.62L67.02 122.2L67.62 121.81L68.25 121.44L68.88 121.09L69.54 120.77L70.2 120.47L70.88 120.2L71.57 119.96L72.28 119.74L72.99 119.54L73.72 119.38L74.46 119.25L75.21 119.14L75.96 119.06L76.73 119.02L77.5 119L265 119L265.77 119.02L266.54 119.06Z"})]}),f=a(358),x=a(362),y=a(387),O=a(365),w=a(341),C=a(385),k=a(386),T=a(372),v=a(182),A=a(337),S=a(338),P=a(159);const M=Object(v.a)({palette:{mode:"dark",background:{default:"#303030",paper:"#424242"},primary:{main:A.a[500]},secondary:{main:S.a.A400},grey:{main:P.a[300],contrastText:"#000000de"},white:{main:"#ffffff"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}},MuiAppBar:{styleOverrides:{root:{backgroundImage:"unset"}}}}});M.scrollBar={width:8,track:{backgroundColor:`${M.palette.background.default}`},thumb:{backgroundColor:`${P.a[600]}`}};var I=M,D=a(184),F={allTags:[],currentTags:[],myAlbumsCache:{lastCached:void 0,albums:void 0},albumsForCurrentTags:[],currentAlbum:void 0,currentSearch:{query:void 0,tags:[]},playingAlbum:void 0,isPlaying:!1},z=n.a.createContext([{},function(){}]),N=function(e){var t=Object(s.useState)(F),a=Object(D.a)(t,2),n=a[0],i=a[1];return Object(p.jsx)(z.Provider,{value:[n,i],children:e.children})},R=a(339),E=a(160),U=a.n(E),B=a(161),$=a(40);const W={apiKey:"AIzaSyBmzK47Vh5JLPeBbXLXS2PQh-VFBJXuxZE",authDomain:"spotifytagger.firebaseapp.com",projectId:"spotifytagger",storageBucket:"spotifytagger.appspot.com",messagingSenderId:"496717718552",appId:"1:496717718552:web:67839caade4cbfce010f6d",measurementId:"G-9V9HQJSS5M"},_=!1;class G{static initFirebase(){return new Promise((async(e,t)=>{if(void 0===G.db){_,G.db=Object($.f)(Object(B.a)(W)),Object($.d)(G.db).catch((e=>{"failed-precondition"==e.code||e.code}));const t=await G.getSpotifyUserID(),a=Object($.h)(Object($.a)(G.db,`users/${t}/albums`));Object($.g)(a,(t=>{G.dbAlbumsSnapshot=t,e()}))}else e()}))}static setFirebaseOffline(){return new Promise((async(e,t)=>{await Object($.b)(G.db),e()}))}static setFirebaseOnline(){return new Promise((async(e,t)=>{await Object($.e)(G.db),e()}))}static hasSpotifyToken(){return void 0!==G.spotifyApi.getAccessToken()}static setSpotifyToken(e){G.spotifyApi.setAccessToken(e)}static getSpotifyUserData(){return new Promise((async(e,t)=>{e(await G.spotifyApi.getMe())}))}static getSpotifyUserID(){return new Promise((async(e,t)=>{if(void 0===G.spotifyUserId)try{const t=await G.getSpotifyUserData();G.spotifyUserId=t.body.id,e(G.spotifyUserId)}catch(a){e(void 0)}else e(G.spotifyUserId)}))}static fetchSavedAlbums(e,t,a=!0,s=!0){return new Promise((async(n,i)=>{try{const i=await G.spotifyApi.getMySavedAlbums({limit:t,offset:e}),r=i.body.total,c=i.body.items.map(((e,t)=>G._formatSpotifyAlbum(e.album)));if(a){const e=c.map((e=>e.id)),t=await G.fetchTagsForAlbumKeys(e);c.forEach((e=>{const a=t[e.id]||[];s&&a.reverse(),e.tags=a}))}n([c,r])}catch(r){console.warn("fetchSavedAlbums",r),n([[],0])}}))}static fetchAlbumsByKey(e){return new Promise((async(t,a)=>{if(e){let a=[];for(;e.length>0;){const n=e.splice(0,20);try{const e=await G.spotifyApi.getAlbums(n);a=a.concat(e.body.albums.map(((e,t)=>G._formatSpotifyAlbum(e))))}catch(s){console.warn("fetchAlbumsByKey",s),t([]);break}}t(a)}else console.warn("fetchAlbumsByKey: no keys!"),t([])}))}static fetchTracksForAlbum(e,t=!1){return new Promise((async(a,s)=>{try{const s=(await G.spotifyApi.getAlbumTracks(e)).body.items;if(t){(await G.spotifyApi.getTracks(s.map((e=>e.id)))).body.tracks.forEach((e=>{s.find((t=>t.id===e.id)).popularity=e.popularity}))}a(s)}catch(n){s(n)}}))}static createPlaylist(e,t="",a=!1){return new Promise(((s,n)=>{G.spotifyApi.createPlaylist(e,{description:t,public:a}).then((e=>{s(e.body.id)}),(e=>{n(e)}))}))}static addTracksToPlaylist(e,t){return new Promise((async(a,s)=>{let n="";for(;t.length>0;){const a=t.splice(0,100);try{n=await G.spotifyApi.addTracksToPlaylist(e,a),console.log(n)}catch(i){console.warn("addTracksToPlaylist",i),s(i)}}a(n)}))}static _formatSpotifyAlbum(e){return{id:e.id,albumArtists:e.artists.map((e=>e.name)).join(", "),albumName:e.name,albumArt:e.images[2].url,year:e.release_date.split("-")[0],tags:[]}}static fetchTagsForAlbumKeys(e){return new Promise((async(t,a)=>{const s={};G.dbAlbumsSnapshot.forEach((t=>{void 0!==e&&-1===e.indexOf(t.id)||(s[t.id]=t.data().tags)})),t(s)}))}static fetchKeysForTags(e){return new Promise((async(t,a)=>{e.length>10&&console.warn("too many tags!");const s=[];G.dbAlbumsSnapshot.forEach((t=>{const a=t.data().tags;let n=!0;for(let s=0;s<e.length;s++)if(-1===a.indexOf(e[s])){n=!1;break}n&&s.push(t.id)})),t(s)}))}static fetchAlbumsForTags(e){return new Promise((async(t,a)=>{try{const a=await G.fetchKeysForTags(e),s=await G.fetchAlbumsByKey(a);s.forEach((e=>{const t=-1!==a.indexOf(e.id);t&&(e.tags=t.tags)})),t(s)}catch(s){console.warn("fetchAlbumsForTags",s),t([])}}))}static fetchUniqueTags(){return new Promise((async(e,t)=>{const a={};G.dbAlbumsSnapshot.forEach((e=>{const t=e.data().tags;t&&Array.isArray(t)?t.forEach((e=>{void 0===a[e]&&(a[e]=0),a[e]++})):console.warn("fb: no tags for",e.id)})),e(a)}))}static fetchUniqueTagsArray(){return new Promise(((e,t)=>{G.fetchUniqueTags().then((t=>{const a=[];for(const[e,s]of Object.entries(t))a.push({label:e,count:s});e(a)}),(t=>{console.warn("fetchUniqueTagsArray",t),e([])}))}))}static updateDoc(e){return new Promise((async(t,a)=>{const s=await G.getSpotifyUserID(),n=Object($.a)(G.db,`users/${s}/albums`),i=e.id;delete e.id,await Object($.i)(Object($.c)(n,i),e,{merge:!0}),t(!0)}))}static updateDocs(e){return new Promise((async(t,a)=>{const s=Object($.j)(G.db),n=await G.getSpotifyUserID(),i=Object($.a)(G.db,`users/${n}/albums`);e.forEach((e=>{const t=Object($.c)(i,e.id);s.set(t,{tags:e.tags})})),await s.commit(),t(!0)}))}static deleteAllTags(){return new Promise((async(e,t)=>{await G.getSpotifyUserID();e(!0)}))}static startDiscogsLog(){this.discogsStats.startTime=(new Date).getTime(),this.discogsStats.callTimes=[]}static getDiscogsMatchesForAlbum(e,t=!1){const a=t?2:5;return new Promise((async(s,n)=>{let i=e.albumArtists.split(",")[0],r=!1;0===i.toLowerCase().indexOf("various")&&(r=!0,i="");const c=e.albumName.replace(/LP/,"").replace(/EP/,""),o=[{release_title:c,artist:i,per_page:1},{query:`${c} ${i}`,per_page:5},{query:`${c}`,per_page:5},{query:`${c.split(/\b/)[0]} ${i}`,per_page:5},{query:`${c.split(/\b/)[0]} ${i.split(/\b/)[0]}`,per_page:5}];let l,d=o.shift(),h=0,b=[];do{h++;try{b=await G._doDiscogsSearch(d,t)}catch(u){console.warn("Probably exceeding API limit!!!",u),b=[],l=u}d=o.shift()}while(!l&&h<a&&0===b.length&&d);l?n(l):(b=G._filterDiscogsResults(e,b,r),s(b))}))}static _doDiscogsSearch(e,t){return new Promise(((a,s)=>{void 0!==this.discogsStats.callTimes&&this.discogsStats.callTimes.push((new Date).getTime());const n=new URL("https://api.discogs.com/database/search"),i=Object.assign(e,{type:"release",page:0,token:"zVXJkuBoXwLyxIzfZUwoxxjMIYzCiTkUYqlsQnjR"});n.search=new URLSearchParams(i).toString();fetch(n,{method:"GET",mode:"cors",headers:{}}).then((async e=>{const s=t?950:0,n=(await e.json()).results.map((e=>{const t=e.title.indexOf(" - ");let a=e.title.substr(0,t);const s=e.title.substr(t+3);a=a.replace(/\s\(\d+\)/g,""),a=a.replace("*","");let n=[];return e.genre&&(n=n.concat(e.genre)),e.style&&(n=n.concat(e.style)),n=n.filter(((e,t,a)=>a.indexOf(e)===t)),{uri:e.uri,title:s,artists:a,genres:n,thumb:e.thumb}}));setTimeout((()=>{a(n)}),s)}),(e=>{s(e)}))}))}static _filterDiscogsResults(e,t,a){const s=e.albumArtists.split(",").map((e=>e.split(/\s/))).flat().map((e=>e.toLowerCase())),n=e.albumName.split(/\s/).map((e=>e.replace(/\W/g,"").toLowerCase())),i=a?0:1,r=Math.min(3,Math.ceil(n.length/2));return t.filter((e=>{let t=!0;if(i>0){t=e.artists.split(/(?:,\s)|(?:\s&\s)/).map((e=>e.split(/\s/))).flat().map((e=>e.toLowerCase())).filter((e=>-1!==s.indexOf(e))).length>=i}const a=e.title.split(/\s/).map((e=>e.replace(/\W/g,"").toLowerCase())).filter((e=>-1!==n.indexOf(e)));return t&&a.length>=r}))}static toTitleCase(e){return e.replace(/([^\W_]+[^\s-]*) */g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()))}}G.spotifyApi=new U.a,G.spotifyUserId=void 0,G.db=void 0,G.dbAlbumsSnapshot=void 0,G.logDiscogsStats=!1,G.discogsStats={startTime:void 0,callTimes:void 0};var q=G;const K="MyAlbumsCache";var J=()=>{const[e,t]=Object(s.useContext)(z),a=Object(R.a)("(min-width:800px)");function n(t,a){return!1===i()?new Promise(((s,n)=>{let i=[...e.myAlbumsCache.albums];const r=i.length;if(void 0!==t){const e=Math.min(r,t+a);i=i.slice(t,e)}s([i,r])})):q.fetchSavedAlbums(t,a,!0)}function i(t=36e5){if(void 0===e.myAlbumsCache.albums)return!0;if(e.myAlbumsCache.lastCached){return(new Date).getTime()-e.myAlbumsCache.lastCached>t}return!0}function r(e){const a=(new Date).getTime();t((t=>({...t,myAlbumsCache:{albums:e,lastCached:a}}))),window.localStorage.setItem(K,JSON.stringify(e))}function c(){return new Promise((async(e,t)=>{const[a,s]=await n();e(a.filter((e=>0===e.tags.length)))}))}async function o(){const e=await q.fetchUniqueTagsArray();e.sort(((e,t)=>t.count-e.count)),t((t=>({...t,allTags:e})))}async function l(a){let s=[];if(-1!==a.indexOf("[ Untagged ]"))s=await c(),a=["[ Untagged ]"];else if(!1===i()){const t=await q.fetchKeysForTags(a);s=e.myAlbumsCache.albums.filter((e=>-1!==t.indexOf(e.id)))}else s=await q.fetchAlbumsForTags(a);t((e=>({...e,currentTags:a,albumsForCurrentTags:s})))}function d(t){-1===e.currentTags.indexOf(t)&&l([...e.currentTags,t])}function h(t){l(e.currentTags.filter((e=>e!==t)))}return{setSpotifyToken:function(e){q.setSpotifyToken(e)},hasSpotifyToken:function(){return q.hasSpotifyToken()},getSpotifyUserData:function(){return q.getSpotifyUserData()},initFirebase:function(){return q.initFirebase()},isFirebaseReady:function(){return void 0!==q.dbAlbumsSnapshot},persistentSideBar:function(){return a},sideBarWidth:function(){return 250},getMyAlbums:n,needsMyAlbumsCache:i,getMyAlbumsCache:function(){{const e=JSON.parse(window.localStorage.getItem(K));return null!==e?(console.log("got albums from localStorage"),e):void 0}},setMyAlbumsCache:r,getAlbumsForCurrentTags:function(t,a){return new Promise((async(s,i)=>{let r,c=0;if(e.currentTags.length>0?(c=e.albumsForCurrentTags.length,r=[...e.albumsForCurrentTags]):[r,c]=await n(t,a),void 0!==t){const e=Math.min(c,t+a);r=r.slice(t,e)}s([r,c])}))},getUntaggedAlbums:c,setTagsForAlbum:function(a,s){if(window.localStorage.removeItem(K),!1===i()){let n=-1;for(let t=0;t<e.myAlbumsCache.albums.length;t++)if(e.myAlbumsCache.albums[t].id===a){n=t;break}if(-1!==n){const a=Object.assign({},e.myAlbumsCache.albums[n],{tags:s}),i=[...e.myAlbumsCache.albums];i.splice(n,1,a);const r=e.myAlbumsCache.lastCached;t((e=>({...e,myAlbumsCache:{albums:i,lastCached:r}})))}else console.warn("setTagsForAlbum: could not find cached album!")}return new Promise(((e,t)=>{q.updateDoc({id:a,tags:s}).then((t=>{t?o().then((()=>e(!0))):e(!1)}))}))},setTagsForAlbums:function(t){if(!1===i()){const a=[...e.myAlbumsCache.albums];t.forEach((e=>{let t=-1;for(let s=0;s<a.length;s++)if(a[s].id===e.id){t=s;break}if(-1!==t){const s=Object.assign({},a[t],{tags:e.tags});a.splice(t,1,s)}else console.warn("setTagsForAlbum: could not find cached album!")})),r(a)}return new Promise(((e,a)=>{q.updateDocs(t).then((t=>{o().then((()=>e(!0)))}))}))},getAlbumTracks:function(e,t){return new Promise(((a,s)=>{q.fetchTracksForAlbum(e,t).then((e=>{a(e)}),(e=>{console.warn("could not get album tracks",e),a([])}))}))},getAllTags:function(){return e.allTags},refreshAllTags:o,deleteAllTags:function(){return q.deleteAllTags()},getCurrentTags:function(){return e.currentTags},setCurrentTags:l,resetCurrentTags:function(){t((e=>({...e,currentTags:[...e.currentTags]})))},addCurrentTag:d,removeCurrentTag:h,toggleCurrentTag:function(t){-1===e.currentTags.indexOf(t)?d(t):h(t)},getCurrentAlbum:function(){return e.currentAlbum},setCurrentAlbum:function(e){t((t=>({...t,currentAlbum:e})))},getPlayingAlbum:function(){return e.playingAlbum},playAlbum:function(a){e.playingAlbum!==a?t((e=>({...e,playingAlbum:a,isPlaying:!0}))):!1===e.isPlaying&&t((e=>({...e,isPlaying:!0})))},stopPlaying:function(){t((e=>({...e,isPlaying:!1})))},isPlaying:e.isPlaying,searchDiscogsForAlbum:function(e,t=!1){return new Promise(((a,s)=>{q.getDiscogsMatchesForAlbum(e,t).then((e=>{e.length>0?a(e[0]):a(void 0)}),(e=>{s(e)}))}))},createPlaylistForTracks:function(e,t,a,s=!1){return new Promise((async(n,i)=>{try{const i=await q.createPlaylist(e,t,s);await q.addTracksToPlaylist(i,a);n(i)}catch(r){i(r)}}))}}};const V="[ Untagged ]",H=Object(x.a)((e=>({root:{"&":{height:"100%",display:"flex",flexDirection:"column"},"& h6":{padding:`${e.spacing(1)} ${e.spacing(2)} 0 ${e.spacing(2)}`,backgroundColor:e.palette.primary.dark,borderRight:"2px solid theme.palette.primary.dark"},"& .MuiBox-root":{padding:`${e.spacing(1)} ${e.spacing(2)} ${parseInt(e.spacing(1))-2}px`,backgroundColor:e.palette.primary.dark,borderBottom:`1px solid ${e.palette.grey[700]}`},"& .MuiBox-root > .MuiTypography-button":{padding:`${e.spacing(1)} ${e.spacing(2)} ${e.spacing(1)} 0`},"& .MuiList-root::-webkit-scrollbar":{width:e.scrollBar.width},"& .MuiList-root::-webkit-scrollbar-track":e.scrollBar.track,"& .MuiList-root::-webkit-scrollbar-thumb":e.scrollBar.thumb,"& .MuiList-root":{flexGrow:1,overflowY:"scroll",borderRight:`2px solid ${e.palette.grey[800]}`}},list:{"& .MuiListItem-root.Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.16)"}}})));var X=({handleTagClick:e,persistent:t,...a})=>{const{getUntaggedAlbums:n,getAllTags:i,getCurrentTags:r,getAlbumsForCurrentTags:c,toggleCurrentTag:o,sideBarWidth:h}=J(),[b,u]=Object(s.useState)([]),[g,j]=Object(s.useState)("count"),m=Object(s.useRef)(null);Object(s.useEffect)((()=>{m.current.scrollTop=0}),[r()]),Object(s.useEffect)((()=>{(async()=>{let e=[];const t=r();if(t.length>0){const a={},[s,n]=await c(),i=-1!==t.indexOf(V);s.forEach((e=>{(i||e.tags.find((e=>-1!==t.indexOf(e))))&&(i?(void 0===a[V]&&(a[V]=0),a[V]++):e.tags.forEach((e=>{void 0===a[e]&&(a[e]=0),a[e]++})))}));for(const[r,c]of Object.entries(a)){const a=t.indexOf(r);e.push({label:r,count:c,index:a})}}else{e=i().map((e=>({...e,index:-1})));const t=await n();t.length>0&&e.splice(0,0,{label:V,count:t.length,index:0})}u(((e,t)=>e.sort(((e,a)=>{if(-1===e.index&&-1===a.index){if("count"===t){const t=a.count-e.count;return 0===t?-1===e.index?1:-1===a.index?-1:e.index-a.index:t}return e.label<a.label?-1:e.label>a.label?1:0}return-1===e.index?1:-1===a.index||e.index<a.index?-1:1})))(e,g))})()}),[i(),r(),g]);const L=H();return Object(p.jsxs)(d.a,{...a,className:L.root,style:{width:`${h()}`},children:[!t&&Object(p.jsx)(l.a,{variant:"h6",children:"Tags"}),Object(p.jsxs)(d.a,{children:[Object(p.jsx)(l.a,{variant:"button",children:"Sort"}),Object(p.jsxs)(C.a,{size:"small",children:[Object(p.jsx)(k.a,{onClick:()=>j("label"),variant:"label"===g?"contained":"outlined",color:"grey",children:"Label"}),Object(p.jsx)(k.a,{onClick:()=>j("count"),variant:"count"===g?"contained":"outlined",color:"grey",children:"Count"})]})]}),Object(p.jsxs)(y.a,{dense:t,ref:m,className:L.list,children:[0===b.length&&Object(p.jsx)(O.a,{children:Object(p.jsx)(w.a,{children:"Add some tags to get started"})}),b.map(((e,t)=>Object(p.jsxs)(O.a,{button:!0,disableRipple:!0,disableTouchRipple:!0,selected:-1!==r().indexOf(e.label),onClick:()=>o(e.label),children:[Object(p.jsx)(w.a,{children:e.label}),Object(p.jsx)(T.a,{size:"small",disabled:!0,variant:"outlined",label:e.count})]},t)))]})]})},Z=a(39),Y=a(14),Q=a(78),ee=a(3),te=a(6);const ae=[{name:"VirtualTable"}],se="albumArtColumnType";class ne extends n.a.PureComponent{render(){const{onClick:e,width:t}=this.props;return Object(p.jsxs)(ee.h,{name:"AlbumArtColumn",dependencies:ae,children:[Object(p.jsx)(ee.f,{name:"tableColumns",computed:({tableColumns:e})=>function(e,t){return[{key:se,type:se,width:t},...e]}(e,t)}),Object(p.jsx)(ee.k,{name:"tableCell",predicate:({tableRow:e,tableColumn:t})=>function(e,t){return e.type===te.s&&t.type===se}(e,t),children:Object(p.jsx)(Z.c.Cell,{})}),Object(p.jsx)(ee.k,{name:"tableCell",predicate:({tableRow:e,tableColumn:t})=>function(e,t){return e.type!==te.s&&e.type!==te.w&&t.type===se}(e,t),children:t=>Object(p.jsx)(Z.c.Cell,{...t,row:t.tableRow.row,style:{textOverflow:"clip"},children:t.tableRow.row&&Object(p.jsx)(k.a,{variant:"text",style:{padding:"4px"},onClick:()=>e(t.tableRow.row.id),children:Object(p.jsx)("img",{src:t.tableRow.row.albumArt,width:"64",height:"64"})})})})]})}}ne.defaultProps={width:96};var ie=a(169),re=a.n(ie);const ce=[{name:"EditingState"},{name:"VirtualTable"}],oe="editColumnType";class le extends n.a.PureComponent{render(){const{width:e}=this.props;return Object(p.jsxs)(ee.h,{name:"EditColumn",dependencies:ce,children:[Object(p.jsx)(ee.f,{name:"tableColumns",computed:({tableColumns:t})=>function(e,t){return[...e,{key:oe,type:oe,width:t}]}(t,e)}),Object(p.jsx)(ee.k,{name:"tableCell",predicate:({tableRow:e,tableColumn:t})=>function(e,t){return e.type===te.s&&t.type===oe}(e,t),children:Object(p.jsx)(Z.c.Cell,{children:" "})}),Object(p.jsx)(ee.k,{name:"tableCell",predicate:({tableRow:e,tableColumn:t})=>function(e,t){return e.type!==te.s&&e.type!==te.w&&t.type===oe}(e,t),children:e=>Object(p.jsx)(ee.l,{children:({editingRowIds:t},{startEditRows:a})=>Object(p.jsx)(Z.c.Cell,{...e,row:e.tableRow.row,style:{textOverflow:"clip"},children:Object(p.jsx)(j.a,{size:"small",onClick:()=>{a({rowIds:[e.tableRow.row.id]})},children:Object(p.jsx)(re.a,{})})})})})]})}}le.defaultProps={width:60};var de=a(138),he=a(170),be=a(171),ue=a(187),ge=a(183),je=a(185);const me=({album:e})=>Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)(l.a,{variant:"h6",noWrap:!0,style:{fontSize:"1rem",fontWeight:400},children:e.albumName}),Object(p.jsx)(l.a,{variant:"body1",noWrap:!0,style:{fontSize:".85rem",fontWeight:300},children:e.albumArtists})]}),pe=({tags:e,onClick:t,...a})=>void 0!==t?e.map(((e,n)=>Object(s.createElement)(T.a,{...a,size:"small",label:e,key:n,style:{margin:".125rem .25rem .125rem 0"},onClick:()=>t(e)}))):e.map(((e,t)=>Object(s.createElement)(T.a,{...a,size:"small",label:e,key:t,style:{margin:".125rem .25rem .125rem 0"}})));var Le=[{name:"VirtualTable"}],fe="tagsColumnType";var xe=function(e){Object(ue.a)(a,e);var t=Object(ge.a)(a);function a(){return Object(he.a)(this,a),t.apply(this,arguments)}return Object(be.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.width,s=e.maxHeight;return Object(p.jsxs)(ee.h,{name:"TagsColumn",dependencies:Le,children:[Object(p.jsx)(ee.f,{name:"tableColumns",computed:function(e){return function(e,t){return[].concat(Object(je.a)(e),[{key:fe,type:fe,width:t}])}(e.tableColumns,a)}}),Object(p.jsx)(ee.k,{name:"tableCell",predicate:function(e){return function(e,t){return e.type===te.s&&t.type===fe}(e.tableRow,e.tableColumn)},children:Object(p.jsx)(Z.c.Cell,{children:"Tags"})}),Object(p.jsx)(ee.k,{name:"tableCell",predicate:function(e){return function(e,t){return e.type!==te.s&&e.type!==te.w&&t.type===fe}(e.tableRow,e.tableColumn)},children:function(e){return Object(p.jsx)(Z.c.Cell,Object(de.a)(Object(de.a)({},e),{},{row:e.tableRow.row,style:{whiteSpace:"normal"},children:e.tableRow.row&&Object(p.jsx)("div",{style:{maxHeight:"".concat(s,"px"),overflow:"hidden"},children:Object(p.jsx)(pe,{tags:e.tableRow.row.tags,onClick:t})})}))}})]})}}]),a}(n.a.PureComponent);xe.defaultProps={width:96,maxHeight:84};var ye=a(370),Oe=a(396),we=a(351),Ce=a(397),ke=a(399),Te=a(376),ve=a(394),Ae=a(395),Se=a(350),Pe=a(366),Me=a(172),Ie=a.n(Me),De=a(173),Fe=a.n(De),ze=a(375);const Ne=Object(x.a)((e=>({results:{"&.MuiList-root .MuiListItemAvatar-root":{marginRight:e.spacing(1)}},genres:{"&.MuiList-root":{paddingTop:e.spacing(0),paddingBottom:e.spacing(0)},"&.MuiList-root .MuiListItem-root":{paddingTop:e.spacing(0),paddingBottom:e.spacing(0)}},large:{width:e.spacing(10),height:e.spacing(10)}})));var Re=({album:e,onChange:t})=>{const[a,n]=Object(s.useState)(!1),[i,r]=Object(s.useState)(!1),[c,o]=Object(s.useState)(void 0),[b,g]=Object(s.useState)([]),j=Ne();return Object(p.jsxs)(u.a,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[Object(p.jsxs)(u.a,{item:!0,children:[!i&&!a&&Object(p.jsx)(k.a,{variant:"outlined",color:"grey",onClick:()=>{g([]),n(!0),q.getDiscogsMatchesForAlbum(e).then((t=>{const a=t[0];o(a),void 0!==a&&g(a.genres.filter((t=>-1!==e.tags.indexOf(t)))),n(!1),r(!0)}),(e=>{n(!1),r(!0)}))},startIcon:Object(p.jsx)(Ie.a,{}),disabled:a,children:"Search Discogs"}),i&&void 0===c&&Object(p.jsx)(d.a,{children:Object(p.jsxs)(l.a,{variant:"body1",style:{marginTop:"30px"},children:["No match ",Object(p.jsx)(Fe.a,{style:{verticalAlign:"middle"}})]})})]}),Object(p.jsxs)(u.a,{item:!0,container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:[Object(p.jsxs)(u.a,{item:!0,xs:12,sm:5,children:[a&&Object(p.jsx)(y.a,{subheader:Object(p.jsx)(ve.a,{children:"Album"}),className:j.results,children:Object(p.jsxs)(O.a,{dense:!0,children:[Object(p.jsx)(Ae.a,{children:Object(p.jsx)(ze.a,{variant:"rectangular",children:Object(p.jsx)(Te.a,{variant:"square",className:j.large})})}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)(ze.a,{variant:"text"}),Object(p.jsx)(ze.a,{variant:"text"})]})]})}),i&&c&&Object(p.jsx)(y.a,{subheader:Object(p.jsx)(ve.a,{children:"Album"}),className:j.results,children:Object(p.jsx)(h.a,{title:"View Album on Discogs",children:Object(p.jsxs)(O.a,{dense:!0,button:!0,onClick:()=>{return e=c.uri,void window.open(`https://discogs.com${e}`,"discogsWindow");var e},children:[Object(p.jsx)(Ae.a,{children:Object(p.jsx)(Te.a,{variant:"square",src:c.thumb,className:j.large})}),Object(p.jsx)(w.a,{primary:c.title,secondary:c.artists})]})})})]}),Object(p.jsxs)(u.a,{item:!0,xs:12,sm:7,children:[a&&Object(p.jsxs)(y.a,{dense:!0,subheader:Object(p.jsx)(ve.a,{children:"Genres & Styles"}),className:j.genres,children:[Object(p.jsx)(O.a,{dense:!0,children:Object(p.jsx)(w.a,{children:Object(p.jsx)(ze.a,{variant:"text",height:34})})}),Object(p.jsx)(O.a,{dense:!0,children:Object(p.jsx)(w.a,{children:Object(p.jsx)(ze.a,{variant:"text",height:34})})}),Object(p.jsx)(O.a,{dense:!0,children:Object(p.jsx)(w.a,{children:Object(p.jsx)(ze.a,{variant:"text",height:34})})})]}),i&&c&&Object(p.jsx)(y.a,{dense:!0,subheader:Object(p.jsx)(ve.a,{children:"Genres & Styles"}),className:j.genres,children:c.genres.map(((e,a)=>Object(p.jsxs)(O.a,{dense:!0,button:!0,onClick:()=>(e=>{const a=b.indexOf(e),s=[...b];-1===a?s.push(e):s.splice(a,1),g(s),t(s)})(e),children:[Object(p.jsx)(Se.a,{children:Object(p.jsx)(Pe.a,{color:"secondary",checked:-1!==b.indexOf(e),disableRipple:!0})}),Object(p.jsx)(w.a,{children:e})]},a)))})]})]})]})};const Ee=Object(x.a)((e=>({root:{"&.MuiDialog-root .MuiDialogTitle-root":{backgroundColor:e.palette.primary.main},"& .MuiDialogContent-root":{padding:e.spacing(3)}}}))),Ue=new RegExp("\\s*;\\s*"),Be=n.a.memo((({popupComponent:e})=>Object(p.jsxs)(ee.h,{name:"TagsEditing",children:[Object(p.jsx)(ee.k,{name:"tagsEditing",children:Object(p.jsx)(ee.l,{children:({rows:t,getRowId:a,editingRowIds:s,createRowChange:n,rowChanges:i},{changeRow:r,commitChangedRows:c,stopEditRows:o,cancelChangedRows:l})=>{const[d]=s,h={...t.filter((e=>a(e)===d))[0],...i[d]},b=s;let u="";h.tagsString?u=h.tagsString:h.tags&&Array.isArray(h.tags)&&(u=h.tags.join("; "));const g=s.length>0;return Object(p.jsx)(e,{open:g,row:h,tagsString:u,onChange:(e,t,a)=>{let s,i=[];if("tags"===e)s=t,i=s.split(Ue);else if("discogs"===e){const e=h.tags.concat(t);i=e.filter(((t,a)=>e.indexOf(t)===a))}const c={rowId:d,change:n(h,i,"tags")};r(c);("discogs"===e||a&&";"===a)&&(s=i.join("; "));const o={rowId:d,change:n(h,s,"tagsString")};r(o)},onApplyChanges:()=>{o({rowIds:b}),c({rowIds:b})},onCancelChanges:()=>{o({rowIds:b}),l({rowIds:b})}})}})}),Object(p.jsxs)(ee.k,{name:"root",children:[Object(p.jsx)(ee.m,{}),Object(p.jsx)(ee.m,{name:"tagsEditing"})]})]}))),$e=({row:e,tagsString:t,onChange:a,onApplyChanges:n,onCancelChanges:i,open:r})=>{const[c,o]=Object(s.useState)(),l=Ee();return Object(p.jsxs)(Oe.a,{maxWidth:"sm",fullWidth:!0,className:l.root,open:r,onClose:i,children:[Object(p.jsx)(we.a,{children:"Tags Editor"}),Object(p.jsx)(Ce.a,{children:Object(p.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"stretch",spacing:2,children:[Object(p.jsxs)(u.a,{item:!0,xs:12,children:[Object(p.jsx)(me,{album:e}),Object(p.jsx)(ye.a,{name:"tags",label:"Tags",color:"secondary",style:{marginTop:"16px"},variant:"outlined",fullWidth:!0,spellCheck:!1,autoComplete:"off",value:t,onKeyDown:e=>{o(e.key)},onChange:e=>{a(e.target.name,e.target.value,c)}})]}),Object(p.jsx)(u.a,{item:!0,xs:12,children:Object(p.jsx)(Re,{album:e,onChange:e=>a("discogs",e)})})]})}),Object(p.jsxs)(ke.a,{children:[Object(p.jsx)(k.a,{onClick:i,color:"secondary",children:"Cancel"}),Object(p.jsx)(k.a,{onClick:n,color:"secondary",children:"Save"})]})]})},We=Object(x.a)((e=>({root:{"&":{height:"100%"},"& .MuiTableHead-root":{backgroundColor:e.palette.primary.dark},"& .MuiTableCell-head":{padding:`${parseInt(e.spacing(1))+2}px ${e.spacing(1)}`},"& .MuiTable-root .MuiTableBody-root .MuiTableRow-root .MuiTableCell-body":{padding:"2px 4px"},"& > div > div::-webkit-scrollbar":{width:e.scrollBar.width},"& > div > div::-webkit-scrollbar-track":e.scrollBar.track,"& > div > div::-webkit-scrollbar-thumb":e.scrollBar.thumb},chipTag:{marginRight:e.spacing(1)},paginator:{"&.MuiPagination-root .MuiPagination-ul":{justifyContent:"center"}}}))),_e=[{name:"title",title:"Title",getCellValue:e=>e.albumName+" - "+e.albumArtists}],Ge=(e,t)=>{const a=e.toLowerCase(),s=t.toLowerCase();return a<s?-1:a>s?1:0},qe=({row:e})=>Object(p.jsx)(me,{album:e}),Ke=e=>Object(p.jsx)(Y.b,{for:["title"],formatterComponent:qe,...e}),Je=e=>Object(p.jsx)(Z.a.Root,{...e,style:{height:"99%"}});var Ve=()=>{const{getAlbumsForCurrentTags:e,getCurrentTags:t,addCurrentTag:a,toggleCurrentTag:i,needsMyAlbumsCache:r,resetCurrentTags:c,setMyAlbumsCache:o,setTagsForAlbum:l,playAlbum:d,sideBarWidth:h}=J(),b=Object(s.useRef)(),[u,g]=Object(s.useState)(),[j,m]=Object(s.useState)(!1),[L,f]=Object(s.useState)(!1),[x,y]=Object(s.useState)([]),[O,w]=Object(s.useState)(),C=()=>{const e=window.innerWidth>800;let t=window.innerWidth-82-40-10;e&&(t-=h());const a=Math.round(t*(t>450?.4:.6));g(t-a),w([{columnName:"title",width:a}])},[k]=Object(s.useState)([{columnName:"title",compare:Ge}]);Object(s.useEffect)((()=>{C(),window.addEventListener("resize",Object(Q.a)(C,250))}),[]),Object(s.useEffect)((()=>{(async()=>{if(!1===r()){m(!0);const[t,a]=await e();y(t),m(!1)}})()}),[r(),t()]),Object(s.useEffect)((()=>{x.length>0&&(L?f(!1):b.current.scrollToRow(x[0].id))}),[x]);const T=We();return Object(p.jsx)(n.a.Fragment,{children:Object(p.jsx)("div",{className:T.root,children:Object(p.jsxs)(Z.a,{rootComponent:Je,rows:x,columns:_e,getRowId:e=>e.id,children:[Object(p.jsx)(Y.d,{onCommitChanges:({added:e,changed:t})=>{const a=Object.keys(t)[0];if(t[a]){const e=(e=>{if(e&&Array.isArray(e)){const t=[];return e.forEach((e=>{e.trim().length>0&&t.push(e.trim())})),t}return[]})(t[a].tags);f(!0),l(a,e),c()}}}),Object(p.jsx)(Y.l,{}),Object(p.jsx)(Y.i,{columnExtensions:k}),Object(p.jsx)(Ke,{}),Object(p.jsx)(Z.c,{height:"auto",estimatedRowHeight:78,columnExtensions:O,ref:b}),Object(p.jsx)(Z.b,{showSortingControls:!0}),Object(p.jsx)(ne,{onClick:d,width:82}),Object(p.jsx)(xe,{onClick:a,width:u}),Object(p.jsx)(le,{width:40}),Object(p.jsx)(Be,{popupComponent:$e})]})})})};const He=`https://accounts.spotify.com/authorize?client_id=666253527bbe47a1b7abffd28c9dd851&redirect_uri=https://ajmacdonald.github.io/tagger/&scope=${["streaming","user-read-email","user-read-private","user-read-currently-playing","user-read-playback-state","user-modify-playback-state","user-library-read","user-library-modify","playlist-read-private","playlist-modify-private","playlist-modify-public","playlist-read-collaborative"].join("%20")}&response_type=token&show_dialog=false`;var Xe=e=>Object(p.jsx)(k.a,{...e,onClick:()=>window.location.href=He,children:"Connect to Spotify"});const Ze=Object(x.a)((e=>({box:{borderTop:`2px solid ${e.palette.grey[800]}`,borderRight:`2px solid ${e.palette.grey[800]}`}})));var Ye=({width:e,height:t})=>{const{getPlayingAlbum:a,playAlbum:s,stopPlaying:n}=J(),i=Ze();return Object(p.jsxs)(d.a,{children:[a()&&Object(p.jsx)("iframe",{src:`https://open.spotify.com/embed/album/${a()}`,width:e,height:t,frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"}),!a()&&Object(p.jsx)(d.a,{width:e,height:t,className:i.box,children:Object(p.jsx)("img",{style:{width:e/2+"px",height:t/2+"px",opacity:.5,position:"relative",top:"50%",transform:"translate(50%, -50%)"},src:"/tagger/spotify_icons/Spotify_Icon_RGB_Black.png"})})]})},Qe=a(137),et=a.n(Qe),tt=a(178),at=a.n(tt),st=a(177),nt=a.n(st),it=a(176),rt=a.n(it),ct=a(105),ot=a.n(ct),lt=a(380),dt=a(400),ht=a(352),bt=a(364),ut=a(377),gt=a(368),jt=a(360),mt=a(174),pt=a.n(mt),Lt=a(175),ft=a.n(Lt);const xt=Object(x.a)((e=>({tagsBar:{backgroundColor:"#58319C",minHeight:"50px"},tagIcon:{color:e.palette.primary.light,marginRight:e.spacing(1)},chipTag:{marginRight:e.spacing(1),marginTop:e.spacing(1),marginBottom:e.spacing(1)}})));var yt=({onDelete:e})=>{const{getCurrentTags:t}=J(),a=xt();return Object(p.jsxs)(o.a,{className:a.tagsBar,children:[Object(p.jsx)(pt.a,{fontSize:"large",className:a.tagIcon}),Object(p.jsx)(d.a,{children:t().map(((t,s)=>e?Object(p.jsx)(T.a,{label:t,className:a.chipTag,color:"secondary",onClick:()=>e(t),onDelete:()=>e(t),deleteIcon:Object(p.jsx)(ft.a,{})},s):Object(p.jsx)(T.a,{label:t,className:a.chipTag,color:"secondary"},s)))})]})};const Ot=Object(x.a)((e=>({title:{marginLeft:e.spacing(2),flex:1},root:{"& .MuiPaper-root.MuiDialog-paper":{backgroundColor:e.palette.background.default},"& .MuiDialogContent-root":{padding:e.spacing(3)}},controls:{"&":{display:"flex",flexFlow:"column nowrap",justifyContent:"center",alignItems:"center",padding:e.spacing(2)},"& > *":{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginLeft:e.spacing(0)}},summary:{marginBottom:e.spacing(2)},albums:{"&.MuiDataGrid-root .MuiDataGrid-cell:focus, &.MuiDataGrid-root .MuiDataGrid-cell:focus-within":{outline:"none"},"& .custom-header":{},"& .custom-cell":{textAlign:"center"}},chart:{"&.MuiGrid-root":{height:"100%"},"&.MuiGrid-root .MuiGrid-item":{backgroundColor:e.palette.secondary.main,margin:"0 2px 0 0"}}}))),wt=[{field:"id",headerName:"ID",hide:!0,filterable:!1,sortable:!1},{field:"albumArt",headerName:" ",width:90,filterable:!1,sortable:!1,renderCell:e=>n.a.createElement("img",{width:"60px",height:"60px",src:e.value})},{field:"title",headerName:"Title",flex:1,filterable:!1,sortable:!1,headerClassName:"custom-header",renderCell:e=>Object(p.jsxs)(d.a,{style:{flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[Object(p.jsx)(l.a,{variant:"h6",noWrap:!0,style:{fontSize:"1rem",fontWeight:400},children:e.row.albumName}),Object(p.jsxs)(d.a,{display:"flex",style:{flexDirection:"row"},children:[Object(p.jsx)(l.a,{variant:"body1",noWrap:!0,style:{fontSize:".85rem",fontWeight:300},children:e.row.albumArtists}),Object(p.jsxs)(l.a,{variant:"body1",style:{display:"none",fontSize:".85rem",fontWeight:100},children:["\xa0\u2022\xa0",e.row.year]})]})]})},{field:"popularityChart",headerName:"Popularity",width:200,filterable:!1,sortable:!1,headerAlign:"center",headerClassName:"custom-header",renderCell:e=>Object(p.jsx)(Ct,{tracks:e.row.tracks})},{field:"tracks",headerName:"Tracks",width:90,filterable:!1,sortable:!1,headerAlign:"center",headerClassName:"custom-header",cellClassName:"custom-cell",valueFormatter:e=>{const t=e.row.tracks.length;return`${e.row.tracks.filter((e=>e.include)).length} / ${t}`}}],Ct=({tracks:e})=>{const t=Ot(),a=2*e.length,s=Math.min(8,(200-a)/e.length);return Object(p.jsx)(u.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-end",className:t.chart,children:e.map(((e,t)=>Object(p.jsx)(u.a,{item:!0,style:{height:`${e.popularity}% `,width:`${s}px`,opacity:""+(e.include?1:.25)}},t)))})},kt=({open:e,onClose:t})=>{const{getAlbumsForCurrentTags:a,getAlbumTracks:n,createPlaylistForTracks:i}=J(),[r,h]=Object(s.useState)(!1),[b,g]=Object(s.useState)(!1),[m,L]=Object(s.useState)([]),[f,x]=Object(s.useState)(0),[y,O]=Object(s.useState)(0),[w,C]=Object(s.useState)(0),[T,v]=Object(s.useState)(!1),[A,S]=Object(s.useState)(""),[P,M]=Object(s.useState)(""),[I,D]=Object(s.useState)(!1),[F,z]=Object(s.useState)(!1),[N,R]=Object(s.useState)(void 0),E=e=>e.tracks.map((e=>e.popularity)).reduce(((e,t)=>e+t))/e.tracks.length,U=e=>e.tracks.map((e=>e.popularity)).reduce(((e,t)=>t>e?t:e),0),B=e=>e.tracks.map((e=>e.popularity)).reduce(((e,t)=>t<e?t:e),200);Object(s.useEffect)((()=>{const e=[...m];let t=0;e.forEach((e=>{((e,t)=>{const a=w/100,s=Math.abs(1-a);e.tracks.forEach((n=>{if(0===e.maxPopularity)n.include=T;else if("avg"===t){const t=n.popularity/e.maxPopularity;n.include=t>=a}else if("range"===t){const t=e.maxPopularity-n.popularity;n.include=t/e.popularityRange<=s}}))})(e,"range"),t+=e.tracks.filter((e=>e.include)).length})),L(e),O(t)}),[w,T]),Object(s.useEffect)((()=>{e?(async()=>{h(!0),await(async()=>{const[e,t]=await a();let s=0;for(let a=0;a<e.length;a++){const t=e[a],i=await n(t.id,!0);t.tracks=i.map((e=>({uri:e.uri,popularity:e.popularity,include:!0}))),s+=t.tracks.length,t.averagePopularity=Math.round(E(t)),t.maxPopularity=U(t),t.minPopularity=B(t),t.popularityRange=Math.max(1,t.maxPopularity-t.minPopularity)}L(e),x(t),O(s)})(),h(!1)})():setTimeout((()=>{L([]),x(0),C(0),S(""),M(""),D(!1),z(!1),R(void 0)}),100)}),[e]);const $=Ot();return Object(p.jsxs)(Oe.a,{open:e,onClose:t,fullScreen:!0,className:$.root,children:[Object(p.jsxs)(c.a,{position:"relative",enableColorOnDark:!0,children:[Object(p.jsxs)(o.a,{children:[Object(p.jsx)(j.a,{edge:"start",color:"inherit",onClick:t,"aria-label":"close",size:"large",children:Object(p.jsx)(ot.a,{})}),Object(p.jsx)(l.a,{variant:"h6",className:$.title,children:"Playlist Creator"})]}),Object(p.jsx)(yt,{})]}),Object(p.jsx)(Ce.a,{children:Object(p.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",spacing:3,children:[Object(p.jsx)(u.a,{item:!0,xs:12,sm:12,md:4,lg:3,children:Object(p.jsxs)(lt.a,{className:$.controls,children:[Object(p.jsx)(ye.a,{variant:"outlined",color:"secondary",fullWidth:!0,spellCheck:!1,error:F,label:"Playlist Title",value:A,onChange:e=>{S(e.target.value),z(!1)}}),Object(p.jsx)(ye.a,{variant:"outlined",color:"secondary",fullWidth:!0,spellCheck:!1,label:"Playlist Description",value:P,onChange:e=>M(e.target.value)}),Object(p.jsx)(dt.a,{label:"Public Playlist",labelPlacement:"start",control:Object(p.jsx)(ht.a,{checked:I,onChange:e=>D(e.target.checked),color:"secondary"})}),Object(p.jsxs)("div",{id:"popularity-slider",style:{width:"100%"},children:[Object(p.jsx)(l.a,{gutterBottom:!0,children:"Popularity Threshold"}),Object(p.jsxs)(u.a,{container:!0,spacing:2,children:[Object(p.jsx)(u.a,{item:!0,children:Object(p.jsx)(rt.a,{})}),Object(p.jsx)(u.a,{item:!0,xs:!0,children:Object(p.jsx)(bt.a,{value:w,onChange:(e,t)=>C(t),color:"secondary"})}),Object(p.jsx)(u.a,{item:!0,children:Object(p.jsx)(nt.a,{})})]})]}),Object(p.jsx)(dt.a,{label:"Include Albums With No Popularity Info",labelPlacement:"start",control:Object(p.jsx)(ht.a,{checked:T,onChange:e=>v(e.target.checked),size:"small",color:"secondary"})}),Object(p.jsxs)(l.a,{className:$.summary,children:[r&&"Fetching Track Info...",!r&&`Total Tracks: ${y}`]}),Object(p.jsx)(k.a,{variant:"contained",color:"secondary",size:"large",disabled:r,endIcon:b?Object(p.jsx)(at.a,{}):Object(p.jsx)(et.a,{}),onClick:()=>{0===A.length?z(!0):(async()=>{g(!0);const e=[...m],t=[];e.map((e=>e.tracks.forEach((e=>{e.include&&t.push(e.uri)}))));try{const e=await i(A,P,t,I);R(e)}catch(a){console.warn(a)}g(!1)})()},children:"Create Spotify Playlist"}),N&&Object(p.jsx)(d.a,{style:{textAlign:"center",marginTop:"16px"},children:Object(p.jsxs)(l.a,{variant:"h6",children:["Playlist ",Object(p.jsx)(ut.a,{href:`https://open.spotify.com/playlist/${N}`,target:"_blank",rel:"noreferrer",color:"secondary",children:A})," created!"]})})]})}),Object(p.jsx)(gt.a,{mdDown:!0,children:Object(p.jsx)(u.a,{item:!0,sm:8,md:8,lg:9,style:{display:"flex",height:"calc(100vh - 170px)"},children:Object(p.jsx)("div",{style:{flexGrow:1},children:Object(p.jsx)(jt.a,{className:$.albums,loading:r,componentsProps:{popularityThreshold:w},rows:m,columns:wt,rowCount:f,pageSize:f,rowHeight:60,hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0})})})})]})})]})},Tt=e=>{const{getCurrentTags:t}=J(),[a,i]=Object(s.useState)(!1);return Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)(h.a,{title:"Create Playlist from Tags",children:Object(p.jsx)("span",{children:Object(p.jsx)(j.a,{onClick:()=>{a||i(!0)},disabled:0===t().length,size:"large",children:Object(p.jsx)(et.a,{})})})}),Object(p.jsx)(kt,{open:a,onClose:()=>i(!1)})]})};var vt=a(186),At=a(373),St=a(402),Pt=a(353),Mt=a(354),It=a(355),Dt=a(356),Ft=a(357);var zt=({userName:e})=>{const{getMyAlbums:t,deleteAllTags:a}=J(),[i,r]=Object(s.useState)(null),[c,o]=Object(s.useState)(!1),l=Boolean(i),d=()=>{r(null)},h=()=>{o(!1)};return Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)(k.a,{onClick:e=>{r(e.currentTarget)},startIcon:void 0!==e?Object(p.jsx)(Pt.a,{}):Object(p.jsx)(Mt.a,{}),disabled:void 0===e,"aria-controls":open?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":open?"true":void 0,color:"white",children:void 0===e?"":e}),Object(p.jsxs)(vt.a,{anchorEl:i,getcontentanchorel:null,id:"account-menu",open:l,onClose:d,onClick:d,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(p.jsxs)(At.a,{onClick:()=>{t().then((([e,t])=>{e=e.filter((e=>e.tags.length>0));const a=JSON.stringify(e),s=document.createElement("a");s.setAttribute("href","data:application/json;charset=utf-8, "+encodeURIComponent(a)),s.setAttribute("download","tag_data.json"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}))},children:[Object(p.jsx)(Se.a,{children:Object(p.jsx)(It.a,{})}),"Download Tag Data"]}),Object(p.jsxs)(At.a,{onClick:()=>{o(!0)},disabled:!0,children:[Object(p.jsx)(Se.a,{children:Object(p.jsx)(Dt.a,{})}),"Delete All Tags"]}),Object(p.jsxs)(At.a,{onClick:()=>{},disabled:!0,children:[Object(p.jsx)(Se.a,{children:Object(p.jsx)(Ft.a,{})}),"Logout"]})]}),Object(p.jsxs)(Oe.a,{open:c,onClose:h,children:[Object(p.jsx)(we.a,{children:"Confirm Deletion"}),Object(p.jsx)(Ce.a,{children:Object(p.jsxs)(St.a,{children:["Are you sure you want to delete all your tags?",Object(p.jsx)("br",{}),"(This action cannot be undone.)"]})}),Object(p.jsxs)(ke.a,{children:[Object(p.jsx)(k.a,{onClick:()=>{a(),h()},children:"Yes"}),Object(p.jsx)(k.a,{onClick:h,children:"No"})]})]})]})},Nt=a(403),Rt=a(181),Et=a.n(Rt),Ut=a(180),Bt=a.n(Ut),$t=a(404);class Wt extends n.a.Component{constructor(e){super(e),this.batchSize=1,this.state={working:!1,complete:!1,progress:0,offset:0-this.batchSize,total:-1,onlyUntagged:!0,overwriteTags:!1,currentAlbum:void 0,tagged:[],unmatched:[],skipped:[]},this.toggleWorking=this.toggleWorking.bind(this),this.toggleUntagged=this.toggleUntagged.bind(this),this.toggleOverwrite=this.toggleOverwrite.bind(this),this.handleClose=this.handleClose.bind(this)}async processBatch(e){let t,a;try{[t,a]=await this.props.getMyAlbums(e,this.batchSize)}catch(c){throw new Error(c)}const s=[...this.state.tagged],n=[...this.state.unmatched],i=[...this.state.skipped];for(let o=0;o<t.length;o++){const e=t[o];let a=!1;if(this.state.onlyUntagged&&0===e.tags.length||!this.state.onlyUntagged){let t;try{t=await this.props.searchDiscogsForAlbum(e,!0)}catch(c){throw new Error(c)}if(t){const a=t.genres;!1===this.state.overwriteTags&&e.tags.length>0&&(a=e.tags.concat(a)),e.tags=a;await this.props.setTagsForAlbum(e.id,a)&&s.push(e)}else n.push(e)}else a=!0,i.push(e);this.setState({currentAlbum:a?void 0:e,tagged:s,unmatched:n,skipped:i},(()=>this.forceUpdate()))}this.setState({tagged:s,unmatched:n,skipped:i});const r=Math.min(a,e+this.batchSize);r>=a?(this.setState({progress:100,working:!1,currentAlbum:void 0,complete:!0}),this.props.resetCurrentTags()):this.state.working&&this.setState({offset:r,total:a})}toggleWorking(){this.state.working?this.stopWorking():this.setState({working:!0,offset:this.state.offset+this.batchSize},(()=>this.forceUpdate()))}stopWorking(){this.state.working&&(this.setState({working:!1,offset:this.state.offset-this.batchSize,currentAlbum:void 0}),this.props.resetCurrentTags())}toggleUntagged(){this.setState({onlyUntagged:!this.state.onlyUntagged})}toggleOverwrite(){this.setState({overwriteTags:!this.state.overwriteTags})}handleClose(){this.stopWorking(),this.props.onClose()}normalize(e,t,a){return 100*(e-t)/(a-t)}componentDidMount(){this.props.getMyAlbums(0,1).then((([e,t])=>{this.setState({total:t})}))}componentDidUpdate(e,t,a){if(this.state.working&&t.offset!==this.state.offset){const e=Math.round(this.normalize(this.state.offset,0,this.state.total));this.setState({progress:e}),this.state.offset<this.state.total&&this.processBatch(this.state.offset)}else this.state.complete}render(){const e=this.props.classes;return Object(p.jsxs)(Oe.a,{open:this.props.open,onClose:this.handleClose,fullScreen:!0,className:e.root,children:[Object(p.jsx)(c.a,{position:"relative",enableColorOnDark:!0,children:Object(p.jsxs)(o.a,{children:[Object(p.jsx)(j.a,{edge:"start",color:"inherit",onClick:this.handleClose,"aria-label":"close",size:"large",children:Object(p.jsx)(ot.a,{})}),Object(p.jsx)(l.a,{variant:"h6",className:e.title,children:"Auto Tagger"})]})}),Object(p.jsx)(Ce.a,{children:Object(p.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",spacing:3,children:[Object(p.jsx)(u.a,{item:!0,xs:12,md:4,lg:3,children:Object(p.jsxs)(lt.a,{className:e.controls,children:[Object(p.jsx)(dt.a,{label:"Only Untagged Albums",labelPlacement:"start",control:Object(p.jsx)(ht.a,{checked:this.state.onlyUntagged,onChange:e=>this.toggleUntagged(e.target.checked),size:"small",color:"secondary"})}),Object(p.jsx)(dt.a,{label:"Overwrite Existing Tags",labelPlacement:"start",control:Object(p.jsx)(ht.a,{checked:this.state.overwriteTags,onChange:e=>this.toggleOverwrite(e.target.checked),size:"small",color:"secondary"})}),Object(p.jsx)(k.a,{variant:"contained",color:"secondary",size:"large",endIcon:this.state.working?Object(p.jsx)(Bt.a,{}):Object(p.jsx)(Et.a,{}),onClick:this.toggleWorking,children:this.state.working?"Stop Tagging":"Start Tagging"})]})}),Object(p.jsxs)(u.a,{item:!0,xs:12,md:8,lg:9,children:[Object(p.jsx)(l.a,{variant:"h6",children:"Stats"}),Object(p.jsxs)(l.a,{variant:"subtitle1",children:["Tagged: ",this.state.tagged.length]}),Object(p.jsxs)(l.a,{variant:"subtitle1",children:["Unmatched: ",this.state.unmatched.length]}),Object(p.jsxs)(l.a,{variant:"subtitle1",children:["Skipped: ",this.state.skipped.length]}),Object(p.jsx)(Nt.a,{className:e.progressBar,variant:"determinate",color:"secondary",value:this.state.progress}),this.state.working&&this.state.currentAlbum&&Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)(me,{album:this.state.currentAlbum}),Object(p.jsx)(pe,{tags:this.state.currentAlbum.tags})]}),this.state.complete&&this.state.unmatched.length>0&&Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)(l.a,{variant:"h6",children:"Unmatched Albums:"}),Object(p.jsx)(d.a,{className:e.unmatchedList,children:this.state.unmatched.map(((e,t)=>Object(p.jsx)(me,{album:e},t)))})]})]})]})})]})}}var _t=Object($t.a)((e=>({title:{marginLeft:e.spacing(2),flex:1},root:{"& .MuiPaper-root.MuiDialog-paper":{backgroundColor:e.palette.background.default},"& .MuiDialogContent-root":{padding:e.spacing(3)}},controls:{"&":{display:"flex",flexFlow:"column nowrap",justifyContent:"center",alignItems:"center",padding:e.spacing(2)},"& > *":{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginLeft:e.spacing(0)}},progressBar:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},unmatchedList:{"& h6":{marginTop:e.spacing(1)}}})),{withTheme:!0})(Wt),Gt=a(389),qt=a(401);class Kt extends n.a.Component{constructor(e){super(e),this.state={working:!1,progress:0,offset:-1,total:-1,cachedAlbums:[]},this.batchSize=20}async processBatch(e){let t,a;try{[t,a]=await this.props.getMyAlbums(e,this.batchSize)}catch(i){throw new Error(i)}const s=[...this.state.cachedAlbums].concat(t),n=Math.min(a,e+this.batchSize);n>=a?this.setState({progress:100,working:!1},(()=>{this.forceUpdate(),setTimeout((()=>{this.props.setMyAlbumsCache(s)}),50)})):this.setState({cachedAlbums:s,offset:n,total:a})}normalize(e,t,a){return 100*(e-t)/(a-t)}componentDidMount(){const e=this.props.getMyAlbumsCache();if(void 0===e)this.setState({offset:0,total:1,working:!0});else{const t=[...e];this.props.setMyAlbumsCache(t)}}componentDidUpdate(e,t,a){if(this.state.working&&t.offset!==this.state.offset){const e=Math.round(this.normalize(this.state.offset,0,this.state.total));this.setState({progress:e}),this.state.offset<this.state.total&&this.processBatch(this.state.offset)}}render(){return Object(p.jsx)(Gt.a,{className:this.props.classes.backdrop,open:this.state.working,children:Object(p.jsxs)(u.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(p.jsx)(u.a,{item:!0,children:Object(p.jsx)(l.a,{children:"Loading Albums..."})}),Object(p.jsx)(u.a,{item:!0,children:Object(p.jsx)(Jt,{size:65,value:this.state.progress})})]})})}}const Jt=e=>Object(p.jsxs)(d.a,{position:"relative",display:"inline-flex",children:[Object(p.jsx)(qt.a,{variant:"determinate",...e}),Object(p.jsx)(d.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(p.jsx)(l.a,{variant:"caption",component:"div",color:"textSecondary",children:`${e.value}%`})})]});var Vt=Object($t.a)((e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:e.palette.grey}})),{withTheme:!0})(Kt);const Ht=250,Xt=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){const a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});function Zt(){const{setSpotifyToken:e,hasSpotifyToken:t,getSpotifyUserData:a,initFirebase:i,isFirebaseReady:r,refreshAllTags:m,persistentSideBar:x,sideBarWidth:y,getMyAlbums:O,searchDiscogsForAlbum:w,setTagsForAlbum:C,removeCurrentTag:k,resetCurrentTags:T,getMyAlbumsCache:v,setMyAlbumsCache:A,needsMyAlbumsCache:S,isPlaying:P,stopPlaying:M}=J(),[I,D]=Object(s.useState)(!1),[F,z]=Object(s.useState)(!1),[N,R]=Object(s.useState)(void 0),E=()=>{D(!I)};return Object(s.useEffect)((()=>{Xt.access_token&&(e(Xt.access_token),a().then((async e=>{R(e.body.display_name),await i(),m()})))}),[]),Object(p.jsxs)(d.a,{sx:{display:"flex",flexFlow:"column nowrap",height:"100vh"},children:[Object(p.jsxs)(c.a,{position:"static",enableColorOnDark:!0,sx:{zIndex:1200},children:[Object(p.jsxs)(o.a,{children:[Object(p.jsx)(j.a,{edge:"start",disabled:!t()||x(),onClick:E,size:"large",children:Object(p.jsx)(L,{fontSize:"large"})}),Object(p.jsx)(l.a,{variant:"h6",sx:{flexGrow:1},children:"Tagger for Spotify"}),Object(p.jsx)(h.a,{title:"Auto Tag Albums",children:Object(p.jsx)("span",{children:Object(p.jsx)(j.a,{onClick:()=>z(!0),disabled:!1===t(),size:"large",children:Object(p.jsx)(f.a,{})})})}),Object(p.jsx)(Tt,{}),Object(p.jsx)(zt,{userName:N})]}),Object(p.jsx)(yt,{onDelete:k})]}),Object(p.jsxs)(d.a,{sx:{flex:"1 1 auto",display:"flex",flexFlow:"row nowrap",overflow:"hidden"},children:[!t()&&Object(p.jsx)(b.a,{style:{marginTop:"100px",textAlign:"center"},children:Object(p.jsx)(Xe,{variant:"contained",color:"secondary"})}),t()&&r()&&S()&&Object(p.jsx)(Vt,{getMyAlbums:O,getMyAlbumsCache:v,setMyAlbumsCache:A}),t()&&!S()&&Object(p.jsxs)(n.a.Fragment,{children:[x()&&Object(p.jsxs)(u.a,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"stretch",sx:{flex:`0 0 ${y()}px`},children:[Object(p.jsx)(u.a,{item:!0,style:{height:"calc(100% - 250px)"},children:Object(p.jsx)(X,{persistent:!0})}),Object(p.jsx)(u.a,{item:!0,style:{height:"250px"},children:Object(p.jsx)(Ye,{albumId:"0oGzSazidykcL5XNTEuS9z",width:y(),height:Ht})})]}),!x()&&Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)(g.a,{variant:"temporary",open:I,onClose:E,ModalProps:{keepMounted:!0},children:Object(p.jsx)(X,{persistent:!1})}),Object(p.jsx)(g.a,{variant:"temporary",anchor:"bottom",open:P,onClose:M,ModalProps:{keepMounted:!0},children:Object(p.jsx)(Ye,{albumId:"0oGzSazidykcL5XNTEuS9z",width:"100%",height:Ht})})]}),Object(p.jsx)(d.a,{sx:{flex:"1 1 auto"},children:Object(p.jsx)(Ve,{})}),Object(p.jsx)(_t,{open:F,onClose:()=>z(!1),getMyAlbums:O,searchDiscogsForAlbum:w,setTagsForAlbum:C,resetCurrentTags:T})]})]})]})}window.location.hash="";var Yt=a(359),Qt=a(405);r.a.render(Object(p.jsx)(N,{children:Object(p.jsxs)(Qt.a,{theme:I,children:[Object(p.jsx)(Yt.a,{}),Object(p.jsx)(Zt,{})]})}),document.getElementById("root"))}},[[266,1,2]]]);